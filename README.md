# Very Fast Simulated Anneeling global optimization of zero offset CRS parameters (VFSA).

[This program is part of the Madagascar package! version 3.0.](https://github.com/ahay/src/tree/master/user/dirack)

[![License: GPL v3](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)

![Result of the convergence test](https://github.com/Dirack/vfsa/blob/master/images/surfaces.png)

This is a package with several C programs adapted to the Madagascar seismic processing package. The mains objective of
those programs is to extract the zero offset CRS parameters (RN, RNIP, BETA) 
a reflection data cube (seismic data organized in CMP x Offset X Time coordinates). 
These parameters can be used to fit the data with the non-hyperbolic CRS traveltime approximation.

[More information about the non-hyperbolic CRS](http://www.reproducibility.org/RSF/book/tccs/crs/paper_html/)

## CRS stacking method

The CRS stacking method use a CRS surface generated by a CRS traveltime approximation to stack the seismic data in the
neighborhood of a normal ray. The traveltime approximation can be determined with only the knowledge of three parameters
associated with the normal ray (RN, RNIP and BETA).

## Convergence result

In the first image above we show the expected result after VFSA global optimization algorithm application.
It shows the convergence of the approximated surface, generated with
the non-hyperbolic CRS traveltime approximation (midle), and the reflection surface extracted from the data (left).
The difference in the time between two surfaces is the approximation error (right, not in the same scale).
The CRS paramters (RN, RNIP and BETA)
that produced the minimum error will be the optimized ones. We show the semblance between the two surfaces in function of
the CRS parameters in the image above (maximum values in red).

![Result of the convergence test](https://github.com/Dirack/vfsa/blob/master/images/parametersCube.png)

## Development setup

You need to have the actual Madagascar package stable release installed on your computer. Please follow the
[Installing Madagascar page](http://www.ahay.org/wiki/Installation) in the official documentation.

## Installation

After Madagascar installing process, you need to install the programs of this repository in your local Madagascar user's
directory. You can compile and install it as any other Madagascar program. 
Usually, Madagascar keeps the path of your local copy source files in the $RSFSRC environment variable. You can
show that on a bash terminal using 'echo' command:

```sh
~$ echo "$RSFSRC"
```

And Madagascar will install executable files on your $RSFROOT directory. You can show that environment variable
with 'echo' too:

```sh
~$ echo "$RSFROOT"
```

Madagascar stores user programs in $RSFSRC/user directory. So, you can create a new directory or put this
repository inside that directory. In this repository, such as every user's repository in Madagascar, we have a compilation 
[SConstruct](https://github.com/Dirack/vfsa/blob/master/SConstruct) that compile the C programs.
Run 'scons' on your $RSFSRC/user/vfsa repository to compile it:

```shell
~$ scons
```

And run 'scons install' in the top directory of your local Madagascar installation 
(the directory path in your $RSFSRC variable):

```shell
~$ sudo scons install
```

If you have any doubt about this process, please reffer to the oficial documentation in 
[Adding_new_programs_to_Madagascar](http://www.ahay.org/wiki/Adding_new_programs_to_Madagascar)

## Usage example

A few motivating and useful examples of how that product can be used can be found in the 
[usage_examples directory](https://github.com/Dirack/vfsa/tree/master/usage_examples).

_For more examples and usage, please refer to the [Wiki](https://github.com/Dirack/vfsa/wiki)._

## Release History

* [v1.0](https://github.com/Dirack/vfsa/releases/tag/v1.0) - Stable release
    * The first proper release
    * Complete global optimization of the CRS parameters
    * Available in the [Madasgacar package](https://github.com/ahay/src/tree/master/user/dirack)

## Meta

Rodolfo Dirack – [@dirack](https://github.com/Dirack) – rodolfo_profissional@hotmail.com

Distributed under the GPL3 license. See ``LICENSE`` for more information.

[vfsa main page](https://github.com/Dirack/vfsa)

## Contributing

1. Fork it (<https://github.com/Dirack/vfsa/fork>)
2. Create your feature branch (`git checkout -b feature/fooBar`)
3. Commit your changes (`git commit -am 'Add some fooBar'`)
4. Push to the branch (`git push origin feature/fooBar`)
5. Create a new Pull Request

#### Important: The commit history should be clear, with commit mesages around one or two paraghraps describing your modifications. Pull Requests with unsatisfactory commit history will be rejected.
